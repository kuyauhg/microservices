server:
  port: 8080

spring:
  application:
    name: hm-gateway-service
  main:
    allow-bean-definition-overriding: true
  cloud:
    gateway:
      # CORS配置
      globalcors:
        cors-configurations:
          '[/**]':
            allowed-origins: "*"
            allowed-methods: "*"
            allowed-headers: "*"
            allow-credentials: false
            max-age: 3600
      # 路由配置
      routes:
        # 用户服务路由
        - id: hm-user-service
          uri: http://localhost:8083
          predicates:
            - Path=/users/**,/addresses/**

        # 商品服务路由
        - id: hm-product-service
          uri: http://localhost:8081
          predicates:
            - Path=/items/**

        # 购物车服务路由
        - id: hm-cart-service
          uri: http://localhost:8082
          predicates:
            - Path=/carts/**

        # 交易服务路由
        - id: hm-trade-service
          uri: http://localhost:8084
          predicates:
            - Path=/orders/**

        # 支付服务路由
        - id: hm-pay-service
          uri: http://localhost:8085
          predicates:
            - Path=/pay-orders/**

# 监控端点配置
management:
  endpoints:
    web:
      exposure:
        include: health,info,gateway
  endpoint:
    health:
      show-details: always
    gateway:
      enabled: true

# 日志配置
logging:
  level:
    com.hmall.gateway: debug
    org.springframework.cloud.gateway: debug
